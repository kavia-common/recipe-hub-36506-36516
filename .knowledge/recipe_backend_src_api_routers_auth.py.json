{"is_source_file": true, "format": "Python", "description": "This file defines API routes for authentication operations such as user registration, login, and retrieving the current user's profile within a FastAPI application. It includes route handlers, utility functions for user retrieval and token verification, and integrates with database models and security utilities.", "external_files": ["src.core.security", "src.db.models", "src.db.schemas", "src.db.session"], "external_methods": ["create_access_token", "decode_token", "get_password_hash", "verify_password", "oauth2_scheme", "get_db"], "published": ["router"], "classes": [{"name": "TokenResponse", "description": "Pydantic model representing the structure of token response for authentication."}], "methods": [{"name": "Optional[User] _get_user_by_email(db: Session, email: str)", "description": "Fetches a User from database by email.", "scope": "", "scopeKind": ""}, {"name": "User _get_current_user(db: Session, token: str)", "description": "Retrieves the current user based on the provided token, raises exception if invalid.", "scope": "", "scopeKind": ""}, {"name": "UserSchema register(user_in: UserCreate, db: Session = Depends(get_db))", "description": "API endpoint to register a new user account.", "scope": "", "scopeKind": ""}, {"name": "TokenResponse login(form_data: OAuth2PasswordRequestForm = Depends(), db: Session = Depends(get_db))", "description": "API endpoint to authenticate a user and provide a JWT token.", "scope": "", "scopeKind": ""}, {"name": "UserSchema me( db: Session = Depends(get_db), token: str = Depends(oauth2_scheme), )", "description": "API endpoint to get the profile of the currently authenticated user.", "scope": "", "scopeKind": ""}], "calls": ["decode_token", "get_password_hash", "verify_password", "create_access_token", "_get_user_by_email", "_get_current_user"], "search-terms": ["auth route handlers", "FastAPI security dependencies", "JWT token handling", "user registration and login endpoints"], "state": 2, "file_id": 11, "knowledge_revision": 31, "git_revision": "fd0659b7928ed0afc356c01426107d4add01518e", "revision_history": [{"26": ""}, {"31": "fd0659b7928ed0afc356c01426107d4add01518e"}], "ctags": [{"_type": "tag", "name": "TokenResponse", "path": "/home/kavia/workspace/code-generation/recipe-hub-36506-36516/recipe_backend/src/api/routers_auth.py", "pattern": "/^class TokenResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserSchema", "path": "/home/kavia/workspace/code-generation/recipe-hub-36506-36516/recipe_backend/src/api/routers_auth.py", "pattern": "/^from src.db.schemas import User as UserSchema, UserCreate$/", "language": "Python", "kind": "unknown", "nameref": "unknown:User"}, {"_type": "tag", "name": "_get_current_user", "path": "/home/kavia/workspace/code-generation/recipe-hub-36506-36516/recipe_backend/src/api/routers_auth.py", "pattern": "/^def _get_current_user(db: Session, token: str) -> User:$/", "language": "Python", "typeref": "typename:User", "kind": "function", "signature": "(db: Session, token: str)"}, {"_type": "tag", "name": "_get_user_by_email", "path": "/home/kavia/workspace/code-generation/recipe-hub-36506-36516/recipe_backend/src/api/routers_auth.py", "pattern": "/^def _get_user_by_email(db: Session, email: str) -> Optional[User]:$/", "language": "Python", "typeref": "typename:Optional[User]", "kind": "function", "signature": "(db: Session, email: str)"}, {"_type": "tag", "name": "access_token", "path": "/home/kavia/workspace/code-generation/recipe-hub-36506-36516/recipe_backend/src/api/routers_auth.py", "pattern": "/^    access_token: str = Field(..., description=\"JWT access token\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/recipe-hub-36506-36516/recipe_backend/src/api/routers_auth.py", "pattern": "/^def login(form_data: OAuth2PasswordRequestForm = Depends(), db: Session = Depends(get_db)) -> To/", "language": "Python", "typeref": "typename:TokenResponse", "kind": "function", "signature": "(form_data: OAuth2PasswordRequestForm = Depends(), db: Session = Depends(get_db))"}, {"_type": "tag", "name": "me", "path": "/home/kavia/workspace/code-generation/recipe-hub-36506-36516/recipe_backend/src/api/routers_auth.py", "pattern": "/^def me($/", "language": "Python", "typeref": "typename:UserSchema", "kind": "function", "signature": "( db: Session = Depends(get_db), token: str = Depends(oauth2_scheme), )"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/recipe-hub-36506-36516/recipe_backend/src/api/routers_auth.py", "pattern": "/^def register(user_in: UserCreate, db: Session = Depends(get_db)) -> UserSchema:$/", "language": "Python", "typeref": "typename:UserSchema", "kind": "function", "signature": "(user_in: UserCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/recipe-hub-36506-36516/recipe_backend/src/api/routers_auth.py", "pattern": "/^router = APIRouter(prefix=\"\\/auth\", tags=[\"Auth\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "token_type", "path": "/home/kavia/workspace/code-generation/recipe-hub-36506-36516/recipe_backend/src/api/routers_auth.py", "pattern": "/^    token_type: str = Field(\"bearer\", description=\"Type of token\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}], "hash": "d96c59995f1857f833ecd0b44ff89d2e", "format-version": 4, "code-base-name": "recipe_backend", "filename": "recipe_backend/src/api/routers_auth.py", "fields": [{"name": "str access_token", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/auth\", tags=[\"Auth\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str token_type", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}]}